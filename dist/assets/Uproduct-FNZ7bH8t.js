import{w as K,r as l,j as s,x as ve,z as we,A as Fe,B as $e,q as Re,y as Ie,g as Se}from"./index-BuUBLaAI.js";import{u as ke,c as Te,a as L}from"./index.esm-DRJaZ8Qf.js";var z={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",c=0;c<arguments.length;c++){var d=arguments[c];d&&(a=o(a,n(d)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var d in a)t.call(a,d)&&a[d]&&(c=o(c,d));return c}function o(a,c){return c?a?a+" "+c:a+c:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(z);var be=z.exports;const m=K(be),Ee=["xxl","xl","lg","md","sm","xs"],Oe="xs",D=l.createContext({prefixes:{},breakpoints:Ee,minBreakpoint:Oe}),{Consumer:Ze,Provider:et}=D;function h(e,t){const{prefixes:r}=l.useContext(D);return e||r[t]||t}function Q(){const{breakpoints:e}=l.useContext(D);return e}function Y(){const{minBreakpoint:e}=l.useContext(D);return e}var J={exports:{}},Le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Be=Le,_e=Be;function P(){}function X(){}X.resetWarningCache=P;var De=function(){function e(n,o,a,c,d,u){if(u!==_e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:X,resetWarningCache:P};return r.PropTypes=r,r};J.exports=De();var qe=J.exports;const k=K(qe),Z=e=>l.forwardRef((t,r)=>s.jsx("div",{...t,ref:r,className:m(t.className,e)})),Ue=["as","disabled"];function Ae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function He(e){return!e||e.trim()==="#"}function ee({tagName:e,disabled:t,href:r,target:n,rel:o,role:a,onClick:c,tabIndex:d=0,type:u}){e||(r!=null||n!=null||o!=null?e="a":e="button");const p={tagName:e};if(e==="button")return[{type:u||"button",disabled:t},p];const f=x=>{if((t||e==="a"&&He(r))&&x.preventDefault(),t){x.stopPropagation();return}c==null||c(x)},N=x=>{x.key===" "&&(x.preventDefault(),f(x))};return e==="a"&&(r||(r="#"),t&&(r=void 0)),[{role:a??"button",disabled:void 0,tabIndex:t?void 0:d,href:r,target:e==="a"?n:void 0,"aria-disabled":t||void 0,rel:e==="a"?o:void 0,onClick:f,onKeyDown:N},p]}const Ve=l.forwardRef((e,t)=>{let{as:r,disabled:n}=e,o=Ae(e,Ue);const[a,{tagName:c}]=ee(Object.assign({tagName:r,disabled:n},o));return s.jsx(c,Object.assign({},o,a,{ref:t}))});Ve.displayName="Button";const F=l.forwardRef(({as:e,bsPrefix:t,variant:r="primary",size:n,active:o=!1,disabled:a=!1,className:c,...d},u)=>{const p=h(t,"btn"),[f,{tagName:N}]=ee({tagName:e,disabled:a,...d}),x=N;return s.jsx(x,{...f,...d,ref:u,disabled:a,className:m(c,p,o&&"active",r&&`${p}-${r}`,n&&`${p}-${n}`,d.href&&a&&"disabled")})});F.displayName="Button";const H=l.forwardRef(({className:e,bsPrefix:t,as:r="div",...n},o)=>(t=h(t,"card-body"),s.jsx(r,{ref:o,className:m(e,t),...n})));H.displayName="CardBody";const te=l.forwardRef(({className:e,bsPrefix:t,as:r="div",...n},o)=>(t=h(t,"card-footer"),s.jsx(r,{ref:o,className:m(e,t),...n})));te.displayName="CardFooter";const se=l.createContext(null);se.displayName="CardHeaderContext";const re=l.forwardRef(({bsPrefix:e,className:t,as:r="div",...n},o)=>{const a=h(e,"card-header"),c=l.useMemo(()=>({cardHeaderBsPrefix:a}),[a]);return s.jsx(se.Provider,{value:c,children:s.jsx(r,{ref:o,...n,className:m(t,a)})})});re.displayName="CardHeader";const ne=l.forwardRef(({bsPrefix:e,className:t,variant:r,as:n="img",...o},a)=>{const c=h(e,"card-img");return s.jsx(n,{ref:a,className:m(r?`${c}-${r}`:c,t),...o})});ne.displayName="CardImg";const ae=l.forwardRef(({className:e,bsPrefix:t,as:r="div",...n},o)=>(t=h(t,"card-img-overlay"),s.jsx(r,{ref:o,className:m(e,t),...n})));ae.displayName="CardImgOverlay";const oe=l.forwardRef(({className:e,bsPrefix:t,as:r="a",...n},o)=>(t=h(t,"card-link"),s.jsx(r,{ref:o,className:m(e,t),...n})));oe.displayName="CardLink";const Me=Z("h6"),ce=l.forwardRef(({className:e,bsPrefix:t,as:r=Me,...n},o)=>(t=h(t,"card-subtitle"),s.jsx(r,{ref:o,className:m(e,t),...n})));ce.displayName="CardSubtitle";const le=l.forwardRef(({className:e,bsPrefix:t,as:r="p",...n},o)=>(t=h(t,"card-text"),s.jsx(r,{ref:o,className:m(e,t),...n})));le.displayName="CardText";const We=Z("h5"),ie=l.forwardRef(({className:e,bsPrefix:t,as:r=We,...n},o)=>(t=h(t,"card-title"),s.jsx(r,{ref:o,className:m(e,t),...n})));ie.displayName="CardTitle";const de=l.forwardRef(({bsPrefix:e,className:t,bg:r,text:n,border:o,body:a=!1,children:c,as:d="div",...u},p)=>{const f=h(e,"card");return s.jsx(d,{ref:p,...u,className:m(t,f,r&&`bg-${r}`,n&&`text-${n}`,o&&`border-${o}`),children:a?s.jsx(H,{children:c}):c})});de.displayName="Card";const S=Object.assign(de,{Img:ne,Title:ie,Subtitle:ce,Body:H,Link:oe,Text:le,Header:re,Footer:te,ImgOverlay:ae});function Ge(e,t){return l.Children.toArray(e).some(r=>l.isValidElement(r)&&r.type===t)}function Ke({as:e,bsPrefix:t,className:r,...n}){t=h(t,"col");const o=Q(),a=Y(),c=[],d=[];return o.forEach(u=>{const p=n[u];delete n[u];let f,N,x;typeof p=="object"&&p!=null?{span:f,offset:N,order:x}=p:f=p;const v=u!==a?`-${u}`:"";f&&c.push(f===!0?`${t}${v}`:`${t}${v}-${f}`),x!=null&&d.push(`order${v}-${x}`),N!=null&&d.push(`offset${v}-${N}`)}),[{...n,className:m(r,...c,...d)},{as:e,bsPrefix:t,spans:c}]}const V=l.forwardRef((e,t)=>{const[{className:r,...n},{as:o="div",bsPrefix:a,spans:c}]=Ke(e);return s.jsx(o,{...n,ref:t,className:m(r,!c.length&&a)})});V.displayName="Col";const A=l.forwardRef(({bsPrefix:e,fluid:t=!1,as:r="div",className:n,...o},a)=>{const c=h(e,"container"),d=typeof t=="string"?`-${t}`:"-fluid";return s.jsx(r,{ref:a,...o,className:m(n,t?`${c}${d}`:c)})});A.displayName="Container";const ze={type:k.string,tooltip:k.bool,as:k.elementType},q=l.forwardRef(({as:e="div",className:t,type:r="valid",tooltip:n=!1,...o},a)=>s.jsx(e,{...o,ref:a,className:m(t,`${r}-${n?"tooltip":"feedback"}`)}));q.displayName="Feedback";q.propTypes=ze;const $=l.createContext({}),M=l.forwardRef(({id:e,bsPrefix:t,className:r,type:n="checkbox",isValid:o=!1,isInvalid:a=!1,as:c="input",...d},u)=>{const{controlId:p}=l.useContext($);return t=h(t,"form-check-input"),s.jsx(c,{...d,ref:u,type:n,id:e||p,className:m(r,t,o&&"is-valid",a&&"is-invalid")})});M.displayName="FormCheckInput";const B=l.forwardRef(({bsPrefix:e,className:t,htmlFor:r,...n},o)=>{const{controlId:a}=l.useContext($);return e=h(e,"form-check-label"),s.jsx("label",{...n,ref:o,htmlFor:r||a,className:m(t,e)})});B.displayName="FormCheckLabel";const pe=l.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:r,inline:n=!1,reverse:o=!1,disabled:a=!1,isValid:c=!1,isInvalid:d=!1,feedbackTooltip:u=!1,feedback:p,feedbackType:f,className:N,style:x,title:v="",type:E="checkbox",label:T,children:y,as:b="input",...U},O)=>{t=h(t,"form-check"),r=h(r,"form-switch");const{controlId:j}=l.useContext($),R=l.useMemo(()=>({controlId:e||j}),[j,e]),i=!y&&T!=null&&T!==!1||Ge(y,B),w=s.jsx(M,{...U,type:E==="switch"?"checkbox":E,ref:O,isValid:c,isInvalid:d,disabled:a,as:b});return s.jsx($.Provider,{value:R,children:s.jsx("div",{style:x,className:m(N,i&&t,n&&`${t}-inline`,o&&`${t}-reverse`,E==="switch"&&r),children:y||s.jsxs(s.Fragment,{children:[w,i&&s.jsx(B,{title:v,children:T}),p&&s.jsx(q,{type:f,tooltip:u,children:p})]})})})});pe.displayName="FormCheck";const _=Object.assign(pe,{Input:M,Label:B}),ue=l.forwardRef(({bsPrefix:e,type:t,size:r,htmlSize:n,id:o,className:a,isValid:c=!1,isInvalid:d=!1,plaintext:u,readOnly:p,as:f="input",...N},x)=>{const{controlId:v}=l.useContext($);return e=h(e,"form-control"),s.jsx(f,{...N,type:t,size:n,ref:x,readOnly:p,id:o||v,className:m(a,u?`${e}-plaintext`:e,r&&`${e}-${r}`,t==="color"&&`${e}-color`,c&&"is-valid",d&&"is-invalid")})});ue.displayName="FormControl";const Qe=Object.assign(ue,{Feedback:q}),me=l.forwardRef(({className:e,bsPrefix:t,as:r="div",...n},o)=>(t=h(t,"form-floating"),s.jsx(r,{ref:o,className:m(e,t),...n})));me.displayName="FormFloating";const W=l.forwardRef(({controlId:e,as:t="div",...r},n)=>{const o=l.useMemo(()=>({controlId:e}),[e]);return s.jsx($.Provider,{value:o,children:s.jsx(t,{...r,ref:n})})});W.displayName="FormGroup";const fe=l.forwardRef(({as:e="label",bsPrefix:t,column:r=!1,visuallyHidden:n=!1,className:o,htmlFor:a,...c},d)=>{const{controlId:u}=l.useContext($);t=h(t,"form-label");let p="col-form-label";typeof r=="string"&&(p=`${p} ${p}-${r}`);const f=m(o,t,n&&"visually-hidden",r&&p);return a=a||u,r?s.jsx(V,{ref:d,as:"label",className:f,htmlFor:a,...c}):s.jsx(e,{ref:d,className:f,htmlFor:a,...c})});fe.displayName="FormLabel";const he=l.forwardRef(({bsPrefix:e,className:t,id:r,...n},o)=>{const{controlId:a}=l.useContext($);return e=h(e,"form-range"),s.jsx("input",{...n,type:"range",ref:o,className:m(t,e),id:r||a})});he.displayName="FormRange";const xe=l.forwardRef(({bsPrefix:e,size:t,htmlSize:r,className:n,isValid:o=!1,isInvalid:a=!1,id:c,...d},u)=>{const{controlId:p}=l.useContext($);return e=h(e,"form-select"),s.jsx("select",{...d,size:r,ref:u,className:m(n,e,t&&`${e}-${t}`,o&&"is-valid",a&&"is-invalid"),id:c||p})});xe.displayName="FormSelect";const ye=l.forwardRef(({bsPrefix:e,className:t,as:r="small",muted:n,...o},a)=>(e=h(e,"form-text"),s.jsx(r,{...o,ref:a,className:m(t,e,n&&"text-muted")})));ye.displayName="FormText";const je=l.forwardRef((e,t)=>s.jsx(_,{...e,ref:t,type:"switch"}));je.displayName="Switch";const Ye=Object.assign(je,{Input:_.Input,Label:_.Label}),Ne=l.forwardRef(({bsPrefix:e,className:t,children:r,controlId:n,label:o,...a},c)=>(e=h(e,"form-floating"),s.jsxs(W,{ref:c,className:m(t,e),controlId:n,...a,children:[r,s.jsx("label",{htmlFor:n,children:o})]})));Ne.displayName="FloatingLabel";const Je={_ref:k.any,validated:k.bool,as:k.elementType},G=l.forwardRef(({className:e,validated:t,as:r="form",...n},o)=>s.jsx(r,{...n,ref:o,className:m(e,t&&"was-validated")}));G.displayName="Form";G.propTypes=Je;const I=Object.assign(G,{Group:W,Control:Qe,Floating:me,Check:_,Switch:Ye,Label:fe,Text:ye,Range:he,Select:xe,FloatingLabel:Ne}),ge=l.forwardRef(({bsPrefix:e,className:t,as:r="div",...n},o)=>{const a=h(e,"row"),c=Q(),d=Y(),u=`${a}-cols`,p=[];return c.forEach(f=>{const N=n[f];delete n[f];let x;N!=null&&typeof N=="object"?{cols:x}=N:x=N;const v=f!==d?`-${f}`:"";x!=null&&p.push(`${u}${v}-${x}`)}),s.jsx(r,{ref:o,...n,className:m(t,a,...p)})});ge.displayName="Row";const Ce=l.forwardRef(({bsPrefix:e,variant:t,animation:r="border",size:n,as:o="div",className:a,...c},d)=>{e=h(e,"spinner");const u=`${e}-${r}`;return s.jsx(o,{ref:d,...c,className:m(a,u,n&&`${u}-${n}`,t&&`text-${t}`)})});Ce.displayName="Spinner";const tt=()=>{const[e,t]=l.useState(!1),[r,n]=l.useState([]),[o,a]=l.useState([]),{data:c}=ve(),[d,{isSuccess:u,isLoading:p}]=we(),[f,{isSuccess:N,isLoading:x}]=Fe(),[v,{isSuccess:E,isLoading:T}]=$e(),[y,b]=l.useState(),U=Re(i=>i.auth.user.userId),O=c&&c.result.filter(i=>i.user===U),j=ke({enableReinitialize:!0,initialValues:{name:y?y.name:"",price:y?y.price:"",description:y?y.description:"",productImg:y?y.productImg:"",quantity:y?y.quantity:""},validationSchema:Te({name:L().required("Enter Name"),price:L().required("Enter price"),description:L().required("Enter description"),quantity:L().required("Enter quantity")}),onSubmit:(i,{resetForm:w})=>{if(y){const g=new FormData;for(const C in i)C!=="productImg"&&g.append(C,i[C]);for(const C of r)g.append("remove",C);for(const C of i.productImg)g.append("productImg",C);f({_id:y._id,fd:g}),b(null)}else{const g=new FormData;for(const C in i)C!=="productImg"&&g.append(C,i[C]);for(const C of i.productImg)g.append("productImg",C);d(g)}a([]),w()}}),R=i=>Se({"form-control my-2":!0,"is-invalid":j.touched[i]&&j.errors[i],"is-valid":j.touched[i]&&!j.errors[i]});return l.useEffect(()=>{u&&Ie.success("product create success")},[u]),s.jsxs(s.Fragment,{children:[s.jsx(A,{children:p||T||x?s.jsxs(s.Fragment,{children:["Please wait...",s.jsx(Ce,{})]}):s.jsxs(S,{children:[s.jsx(S.Header,{children:" Proctuct Detail"}),s.jsx(S.Body,{children:s.jsx(I,{onSubmit:j.handleSubmit,children:s.jsxs(I.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[s.jsx(I.Control,{...j.getFieldProps("name"),className:R("name"),type:"text",placeholder:"Enter Product"}),s.jsx("span",{className:"invalid-feedback",children:j.errors.name}),s.jsx(I.Control,{...j.getFieldProps("price"),className:R("price"),type:"number",placeholder:"Enter price"}),s.jsx("span",{className:"invalid-feedback",children:j.errors.price}),s.jsx(I.Control,{...j.getFieldProps("description"),className:R("description"),type:"text",placeholder:"Enter description"}),s.jsx("span",{className:"invalid-feedback",children:j.errors.description}),y?s.jsxs(s.Fragment,{children:[y.productImg.map(i=>s.jsx("div",{children:s.jsxs("div",{className:`${r.includes(i)&&"border border-danger my-2"} d-flex align-items-center justify-content-between px-4`,children:[s.jsx("img",{src:i,height:100,className:"me-2 rounded-3"}),r.includes(i)?s.jsx(F,{variant:"dark",onClick:w=>n(r.filter(g=>g!==i)),children:"Cancel"}):s.jsx(F,{onClick:w=>{r.includes(i)||n([...r,i])},children:"Remove"})]})})),e?s.jsxs(s.Fragment,{children:[s.jsx(I.Control,{className:R("productImg"),type:"file",multiple:!0,onChange:i=>{const w=[];for(const g of i.target.files)w.push(URL.createObjectURL(g));j.setFieldValue("productImg",i.target.files),a(w)},placeholder:"Enter new productImg"}),s.jsx(F,{onClick:i=>t(null),className:"me-2",children:"Cancel"})]}):s.jsx(F,{onClick:i=>t(!0),className:"me-2",children:"Add new Image"})]}):s.jsxs(s.Fragment,{children:[s.jsx(I.Control,{className:R("productImg"),type:"file",multiple:!0,onChange:i=>{const w=[];for(const g of i.target.files)w.push(URL.createObjectURL(g));j.setFieldValue("productImg",i.target.files),a(w)},placeholder:"Enter productImg"}),o.map(i=>s.jsx("img",{src:i,height:50}))]}),s.jsx(I.Control,{...j.getFieldProps("quantity"),className:R("quantity"),type:"number",placeholder:"Enter quantity"}),s.jsx("span",{className:"invalid-feedback",children:j.errors.quantity}),y?s.jsxs(s.Fragment,{children:[s.jsx(F,{className:"w-100 mb-2",variant:"warning",type:"submit",children:"Update product"}),s.jsx(F,{className:"w-100",variant:"outline-dark",type:"button",onClick:i=>b(null),children:"Cancel"})]}):s.jsx(F,{variant:"info",type:"submit",children:"Add product"})]})})})]})}),s.jsx(A,{children:s.jsx(ge,{children:s.jsx(V,{children:s.jsxs(S,{children:[s.jsx(S.Header,{children:"All Products"}),s.jsx(S.Body,{children:O&&s.jsxs("table",{className:"table table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"name"}),s.jsx("th",{scope:"col",children:"price"}),s.jsx("th",{scope:"col",children:"description"}),s.jsx("th",{scope:"col",children:"productImg"}),s.jsx("th",{scope:"col",children:"quantity"}),s.jsx("th",{scope:"col",children:"actions"})]})}),s.jsx("tbody",{children:O.map(i=>s.jsxs("tr",{children:[s.jsx("td",{children:i.name}),s.jsx("td",{children:i.price}),s.jsx("td",{children:i.description}),s.jsx("td",{children:s.jsx("img",{src:i.productImg,height:50,className:"mx-2 rounded"})}),s.jsx("td",{children:i.quantity}),s.jsxs("td",{children:[s.jsx(F,{className:"me-2",variant:"warning",onClick:w=>b(i),children:"Edit"}),s.jsx(F,{className:"me-2",variant:"danger",onClick:()=>v(i._id),children:"Delete"})]})]},i._id))})]})})]})})})})]})};export{tt as default};
